<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Signup/Login</title>
<link rel="stylesheet" href="{{url_for('static', filename='css/login.css')}}">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div class="flash">
        {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
        {% for category, message in messages %}
        <div class="alert alert-{{ category }} alter-dismissable faded show" role="alert" >   
        {{ message }}
            <button type="button" class="close" data-dismiss="alert" aria-label="close">
                <span aria-hidden="true">&times;</span>
            </button> 
        </div>
        {% endfor %}
        {% endif %}
        {% endwith %}    

    </div>    
                       
    <div class="form-container">
    
        <div class="logo">QA_S</div>
        <div class="d-flex justify-content-center">

            <button type="button" class="btn-toggle active" data-form="login" onclick="toggleForm('login')">Login</button>
            <button type="button" class="btn-toggle" data-form="signup" onclick="toggleForm('signup')">Sign up</button>
        </div>

        <div id="signupForm" class="form-section"> 
            <form method="POST" action="/signup" class="w-100">
                <div class="form-group">
                    <label for="username" class="form-label">Username:</label>
                    <input 
                        type="text" 
                        class="form-control" 
                        id="username" 
                        name="username" 
                        placeholder="Enter your username..." 
                        required>
                </div>
                <div class="form-group">
                    <label for="email" class="form-label">Email:</label>
                    <input 
                        type="email" 
                        class="form-control" 
                        id="signupEmail" 
                        name="email" 
                        placeholder="Enter your email" 
                        required>
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">Password:</label>
                    <input
                        type="password"
                        class="form-control"
                        id="signupPassword"
                        name="password" 
                        placeholder="Choose a password" 
                        required>
                </div>
                <div class="form-group">
                    <label for="confirm_password" class="form-label">confirm Password:</label>
                    <input 
                        type="password" 
                        class="form-control" 
                        id="confirmPassword" 
                        name="confirm_password" 
                        placeholder="Reenter choosen password" 
                        required>
                </div>
                <div class=" form- control d-grid gap-2 col-6 mx-auto" >
                    <button type="submit" class="btn btn-danger w-100">Sign Up</button>
                </div>
            </form>
        </div>

        <div id="loginForm" class="form-section active">
            <form method="POST" action="/login" class="w-100">
                <div class="form-group">
                    <label for="email" class="form-label">Email or Username:</label>
                    <input 
                        type="text" 
                        class="form-control" 
                        id="loginEmail" 
                        name="user_input" 
                        placeholder="Enter your email or username" 
                        required>
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">Password:</label>
                    <input 
                        type="password" 
                        class="form-control" 
                        id="loginPassword" 
                        name="password" 
                        placeholder="Enter your password" 
                        required>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="rememberMe" name="remember">
                    <label class="form-check-label" for="rememberMe">Remember me</label>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-danger w-100">Login</button>
                    <div style="display: flex; align-items: center; text-align: center; margin: 10px 0;">
                        <span style="flex: 1; border-bottom: 1px solid #000; margin-right: 10px;"></span>
                        <span>or</span>
                        <span style="flex: 1; border-bottom: 1px solid #000; margin-left: 10px;"></span>
                    </div>
                    <a href="" class="btn w-100 btn-outline-danger" style="text-decoration: none; ">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-google" viewBox="0 0 16 16">
                            <path d="M15.545 6.558a9.4 9.4 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.7 7.7 0 0 1 5.352 2.082l-2.284 2.284A4.35 4.35 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.8 4.8 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.7 3.7 0 0 0 1.599-2.431H8v-3.08z"/>
                        </svg>
                        Sign in with google
                    </a>
                </div>
                
                <a href="#" data-toggle="modal" data-target="#forgotPasswordModal" style="color: red; text-decoration: none;"  >Forgot Password?</a>
        </form>
    </div>
</div>

<div id="modalContainer"></div> <!-- Placeholder for modal -->

<!-- Bootstrap JavaScript Bundle with Popper -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{url_for('static',filename='js/toggle.js')}}"></script>
<script>
$(document).ready(function() {
    $("#modalContainer").load("/forgot_password"); // Dynamically load the modal
});
</script>
</html>
