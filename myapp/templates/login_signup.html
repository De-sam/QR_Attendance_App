<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Signup/Login</title>
<link rel="stylesheet" href="{{url_for('static', filename='css/login.css')}}">
<link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
</head>
<body>
    <div>
        {% with messages = get_flashed_messages(with_categories=True) %}
        {% if messages %}
            {% for category, message in messages %}
            <div class="alert alert-{{ category }} alert-dismissable fade show" role="alert">
                
                {% if category == 'warning' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-exclamation-diamond" viewBox="0 0 16 16">
                    <path d="M6.95.435c.58-.58 1.52-.58 2.1 0l6.515 6.516c.58.58.58 1.519 0 2.098L9.05 15.565c-.58.58-1.519.58-2.098 0L.435 9.05a1.48 1.48 0 0 1 0-2.098zm1.4.7a.495.495 0 0 0-.7 0L1.134 7.65a.495.495 0 0 0 0 .7l6.516 6.516a.495.495 0 0 0 .7 0l6.516-6.516a.495.495 0 0 0 0-.7L8.35 1.134z"/>
                    <path d="M7.002 11a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 4.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
                  </svg>
                {% elif category == 'danger' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-exclamation-triangle" viewBox="0 0 16 16">
                    <path d="M7.938 2.016A.13.13 0 0 1 8.002 2a.13.13 0 0 1 .063.016.15.15 0 0 1 .054.057l6.857 11.667c.036.06.035.124.002.183a.2.2 0 0 1-.054.06.1.1 0 0 1-.066.017H1.146a.1.1 0 0 1-.066-.017.2.2 0 0 1-.054-.06.18.18 0 0 1 .002-.183L7.884 2.073a.15.15 0 0 1 .054-.057m1.044-.45a1.13 1.13 0 0 0-1.96 0L.165 13.233c-.457.778.091 1.767.98 1.767h13.713c.889 0 1.438-.99.98-1.767z"/>
                    <path d="M7.002 12a1 1 0 1 1 2 0 1 1 0 0 1-2 0M7.1 5.995a.905.905 0 1 1 1.8 0l-.35 3.507a.552.552 0 0 1-1.1 0z"/>
                  </svg>
                {% elif category == 'success' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-check2-all" viewBox="0 0 16 16">
                    <path d="M12.354 4.354a.5.5 0 0 0-.708-.708L5 10.293 1.854 7.146a.5.5 0 1 0-.708.708l3.5 3.5a.5.5 0 0 0 .708 0zm-4.208 7-.896-.897.707-.707.543.543 6.646-6.647a.5.5 0 0 1 .708.708l-7 7a.5.5 0 0 1-.708 0"/>
                    <path d="m5.354 7.146.896.897-.707.707-.897-.896a.5.5 0 1 1 .708-.708"/>
                  </svg>
                {% elif category == 'info' %}
                <svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" fill="currentColor" class="bi bi-info-lg" viewBox="0 0 16 16">
                    <path d="m9.708 6.075-3.024.379-.108.502.595.108c.387.093.464.232.38.619l-.975 4.577c-.255 1.183.14 1.74 1.067 1.74.72 0 1.554-.332 1.933-.789l.116-.549c-.263.232-.65.325-.905.325-.363 0-.494-.255-.402-.704zm.091-2.755a1.32 1.32 0 1 1-2.64 0 1.32 1.32 0 0 1 2.64 0"/>
                  </svg>  
                {% endif %}
                {{ message }}
                &nbsp;
                    <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-x-lg" viewBox="0 0 16 16" type="button" class="close" data-dismiss="alert" aria-label="close">
                        <path d="M2.146 2.854a.5.5 0 1 1 .708-.708L8 7.293l5.146-5.147a.5.5 0 0 1 .708.708L8.707 8l5.147 5.146a.5.5 0 0 1-.708.708L8 8.707l-5.146 5.147a.5.5 0 0 1-.708-.708L7.293 8z"/>
                    </svg>
            </div>
            {% endfor %}
        {% endif %}
        {% endwith %}
        
    </div>
                       
    <div class="form-container">
    
        <div class="logo">QA_S</div>
        
        <div class="d-flex justify-content-center">

            <button type="button" class="btn-toggle active" data-form="login" onclick="toggleForm('login')">Login</button>
            <button type="button" class="btn-toggle" data-form="signup" onclick="toggleForm('signup')">Sign up</button>
        </div>

        <div id="signupForm" class="form-section"> 
            <form method="POST" action="/signup" class="w-100">
                <div class="form-group">
                    <label for="username" class="form-label">Username:</label>
                    <input 
                        type="text" 
                        class="form-control" 
                        id="username" 
                        name="username" 
                        placeholder="Enter your username..." 
                        required>
                </div>
                <div class="form-group">
                    <label for="email" class="form-label">Email:</label>
                    <input 
                        type="email" 
                        class="form-control" 
                        id="signupEmail" 
                        name="email" 
                        placeholder="Enter your email" 
                        required>
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">Password:</label>
                    <input
                        type="password"
                        class="form-control"
                        id="signupPassword"
                        name="password" 
                        placeholder="Choose a password" 
                        required>
                </div>
                <div class="form-group">
                    <label for="confirm_password" class="form-label">confirm Password:</label>
                    <input 
                        type="password" 
                        class="form-control" 
                        id="confirmPassword" 
                        name="confirm_password" 
                        placeholder="Reenter choosen password" 
                        required>
                </div>
                <div class=" form- control d-grid gap-2 col-6 mx-auto" >
                    <button type="submit" class="btn-val w-100">Sign Up</button>
                </div>
            </form>
        </div>

        <div id="loginForm" class="form-section active">
            <form method="POST" action="/login" class="w-100">
                <div class="form-group">
                    <label for="email" class="form-label">Email or Username:</label>
                    <input 
                        type="text" 
                        class="form-control" 
                        id="loginEmail" 
                        name="user_input" 
                        placeholder="Enter your email or username" 
                        required>
                </div>
                <div class="form-group">
                    <label for="password" class="form-label">Password:</label>
                    <input 
                        type="password" 
                        class="form-control" 
                        id="loginPassword" 
                        name="password" 
                        placeholder="Enter your password" 
                        required>
                </div>
                <div class="form-check">
                    <input type="checkbox" class="form-check-input" id="rememberMe" name="remember">
                    <label class="form-check-label" for="rememberMe">Remember me</label>
                </div>
                <div class="form-group">
                    <button type="submit" class="btn btn-danger w-100">Login</button>
                    <div style="display: flex; align-items: center; text-align: center; margin: 10px 0;">
                        <span style="flex: 1; border-bottom: 1px solid #000; margin-right: 10px;"></span>
                        <span>or</span>
                        <span style="flex: 1; border-bottom: 1px solid #000; margin-left: 10px;"></span>
                    </div>
                    <a href="{{ url_for('auth.login_google') }}" class=" w-100 btn btn-outline-danger">
                        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-google" viewBox="0 0 16 16">
                            <path d="M15.545 6.558a9.4 9.4 0 0 1 .139 1.626c0 2.434-.87 4.492-2.384 5.885h.002C11.978 15.292 10.158 16 8 16A8 8 0 1 1 8 0a7.7 7.7 0 0 1 5.352 2.082l-2.284 2.284A4.35 4.35 0 0 0 8 3.166c-2.087 0-3.86 1.408-4.492 3.304a4.8 4.8 0 0 0 0 3.063h.003c.635 1.893 2.405 3.301 4.492 3.301 1.078 0 2.004-.276 2.722-.764h-.003a3.7 3.7 0 0 0 1.599-2.431H8v-3.08z"/>
                        </svg>
                        Sign in with google
                    </a>
                </div>
                
                <a href="#" data-toggle="modal" data-target="#forgotPasswordModal" style="color: #da3e3f; text-decoration: none;"  >Forgot Password?</a>
        </form>
    </div>
</div>

<div id="modalContainer"></div> <!-- Placeholder for modal -->

<!-- Bootstrap JavaScript Bundle with Popper -->
<script src="https://code.jquery.com/jquery-3.5.1.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.2/dist/js/bootstrap.bundle.min.js"></script>
<script src="{{url_for('static',filename='js/toggle.js')}}"></script>
<script>
$(document).ready(function() {
    $("#modalContainer").load("/forgot_password"); // Dynamically load the modal
});
</script>
</html>
