{% extends "dashboard_base.html" %}

{% block title %} join Organisation {% endblock %}

{% block head %}
{{ super() }}
<style>
    .card {
        border: 2px solid goldenrod;
        margin-bottom: 20px;
    }
</style>
{% endblock %}

{% block content %}

<div class="container mt-5">
    <h3>Join organization</h3>
    <!-- Form Start -->
    <form method="POST">
        <!-- Organization Name Input -->
        <div class="mb-3">
            <label for="organizationName" class="form-label">Organization id</label>
            <input type="text" class="form-control" id="organizationName" name="code" placeholder="Enter your organization ID" required>
        </div>

        <!-- Join Organization Button -->
        <button type="submit" class="btn btn-danger btn-sm text-center">
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-plus" viewBox="0 0 16 16">
                <path d="M8 4a.5.5 0 0 1 .5.5v3h3a.5.5 0 0 1 0 1h-3v3a.5.5 0 0 1-1 0v-3h-3a.5.5 0 0 1 0-1h3v-3A.5.5 0 0 1 8 4"/>
              </svg>
            Join Organization
        </button>
        <a href="{{ url_for('views.view_join_requests') }}" class="btn btn-sm btn-success"> 
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-hourglass-bottom" viewBox="0 0 16 16">
                <path d="M2 1.5a.5.5 0 0 1 .5-.5h11a.5.5 0 0 1 0 1h-1v1a4.5 4.5 0 0 1-2.557 4.06c-.29.139-.443.377-.443.59v.7c0 .213.154.451.443.59A4.5 4.5 0 0 1 12.5 13v1h1a.5.5 0 0 1 0 1h-11a.5.5 0 1 1 0-1h1v-1a4.5 4.5 0 0 1 2.557-4.06c.29-.139.443-.377.443-.59v-.7c0-.213-.154-.451-.443-.59A4.5 4.5 0 0 1 3.5 3V2h-1a.5.5 0 0 1-.5-.5m2.5.5v1a3.5 3.5 0 0 0 1.989 3.158c.533.256 1.011.791 1.011 1.491v.702s.18.149.5.149.5-.15.5-.15v-.7c0-.701.478-1.236 1.011-1.492A3.5 3.5 0 0 0 11.5 3V2z"/>
            </svg>
            view request status
        </a>    
    </form>
    <br><br>
    <div class="card container">
        <div class="row justify-content-center">
            <div class="col-md-8">
                {% if organization %}
                <h3 style="text-align: center;">Request to join {{ organization.name }}</h3>
            
                <form method="POST" action="{{ url_for('views.join_request', organization_id=organization.id) }}" style="text-align: center;">
                    {% if locations %}
                        <ul style="list-style: none; padding: 0; text-align: left; display: inline-block;">
                            {% for location in locations %}
                                <li style="margin-bottom: 10px;">
                                    <label>
                                        <input type="checkbox" name="location_ids" value="{{ location.id }}"> {{ location.alias }}
                                    </label>
                                </li>
                            {% endfor %}
                        </ul>
                        <br>
                        <button type="submit" class="btn btn-success btn-sm">Send Join Request</button>
                        
                    {% else %}
                        <p>No locations available.</p>
                    {% endif %}
                </form>
            {% else %}
                <p>No organization data available.</p>
            {% endif %}
            <br>
            </div>
        </div>
    </div>
    
{% endblock %}